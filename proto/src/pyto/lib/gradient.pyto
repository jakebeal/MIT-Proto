def gradient (src):
    feedback(d,v) init {
        d = inf
        v = 0
    } update {
        constrained = any-hood+( nbr(d) + nbr-range + v*(nbr-lag + dt) <= d)
        tri-inequality = min-hood+(nbr(d) + nbr-range)
        v0 = radio-range / (dt * 12)
        
        d = mux(src,0,mux(constrained,tri-inequality,d+(v0*dt)))
        v = mux(src,0,mux(constrained,0,v0))
    }
    d
